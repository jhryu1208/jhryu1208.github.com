---
layout: post
title: "[Linux] 리눅스 퍼미션(Permission)"
subtitle: "[Linux] 리눅스 퍼미션(Permission)"
categories: devlang
tags: linux
comments: true
mathjax: true
---
#### Contents
- [리눅스 퍼미션](#리눅스-퍼미션)
- [퍼미션 심볼](#퍼미션-심볼)
  - [1-1) 파일 타입](#1-1-파일-타입)
  - [1-2) 읽기/쓰기/실행 권한](#1-2-읽기쓰기실행-권한)
  - [1-3) 사용자/그룹/그 외 사용자](#1-3-사용자그룹그-외-사용자)

해당 포스팅에서는 리눅스 퍼미션에 대해서 정리하였습니다.

<br>

---

## <span style="color:navy">리눅스 퍼미션<span>

종종 리눅스 환경에서 특정 json키와 같은 인증키를 통해서 DB에 연결하고자 할 때, 혹은 다른 사람이 생성한 파일 혹은 디렉토리에 편집/접근하려고 할 때,
퍼미션 관련 문제로 인해 인증키 파일을 참조하지 못하거나 디렉토리에 접근하지 못하는 경험을 대부분의 유저가 가지고 있다. 
이처럼, **멀티 유저 운영체제인 리눅스에서는 무분별한 파일의 접근을 막고자 파일과 디렉토리에 접근 권한을 설정**할 수 있다. 
각 디렉토리 혹은 파일의 퍼미션은 터미널에서 `ls -l`명령어로 다음과 같이 가장 왼쪽에 위치한 열(가장 좌측에 위치한 단일 문자 제외)에서 쉽게 확인할 수 있다.

![img_1.png](/assets/img/2022-05-07_linux_permission/figure_1.png)

<br>

## <span style="color:navy">퍼미션 심볼<span>

문자열을 처음 마주하였을 때 r, w, x, l, d 등 문자가 나열된 것을 확인할 수 있다. 
이 문자열은 단순히 이어서 읽는 것이 아니라 다음과 같이 끊어 읽어야 한다. 
그리고, 각 단락은 특정 파일의 타입과 권한을 설명한다.
지금부터 각 단락이 무엇을 의미하는지 알아보도록 하자.

![img_5.png](/assets/img/2022-05-07_linux_permission/figure_2.png)

<br>

### <span style="color:navy">1-1) 파일 타입<span>


아래와 같이 특정 디렉토리안에 `일반파일`, `디렉토리`, 그리고 `심볼릭 파일`을 생성하고,
각 파일의 문자열의 가장 좌측에 위치한 단일 문자가 모두 다른 것을 확인할 수 있다. 
이때, 이 단일 문자는 파일의 권한을 의미하는 것이 아닌 **파일의 타입**을 의미한다.
![img_4.png](/assets/img/2022-05-07_linux_permission/figure_8.png)

위의 `d`, `l`, 그리고 `-`은 다음의 파일 타입을 의미하며, 이 뿐만 아니라 `s`, `c`와 같은 파일 타입들도 존재한다. <br>
(가장 일반적으로 확인할 수 있는 파일 타입이 `d`, `l`, 그리고 `-`이다. )
> - `d` : 디렉토리
> - `l` : 심볼릭 링크
> - `-` : 일반 파일

<br>

따라서, 위의 이미지에서 empty_dir은 디렉토리(`d`), empty_file은 일반 파일(`-`), 그리고 symbolic_file은 심볼릭 링크(`l`)임을 
파일 상세 정보에서 표시되는 문자열을 통해서 파악할 수 있다. 

![img_6.png](/assets/img/2022-05-07_linux_permission/figure_3.png)

<br>

### <span style="color:navy">1-2) 읽기/쓰기/실행 권한<span>

파일 타입을 의미하는 단일 문자 다음에 위치한 문자들의 경우 파일에 대한 권한을 의미한다.
`r`("R"ead), `w`("W"rite), 그리고 `x`(e"X"ecute)가 존재하며, 파일 형식이 파일인지 디렉토리인지에 따라서 조금의 차이가 있다.

<br>

먼저 대상의 형식이 **파일**일 경우 다음과 같다.
> - `r` : 파일을 읽는 것을 허용한다.
> - `w` : 파일을 편집하는 것을 허용한다.
> - `x` : 파일을 실행시키는 것을 허용한다.

대상이 **디렉토리**일 경우에는 다음과 같다.
> - `r` : 디렉토리 안에 있는 파일을 읽는 것을 허용한다.
> - `w` : 디렉토리 안에 있는 파일을 편집하는 것을 허용한다.
> - `x` : 디렉토리 안에 있는 파일을 실행시킬 수 있으며, 내부 파일 metadata의 접근을 허용한다.

<br>

![img_7.png](/assets/img/2022-05-07_linux_permission/figure_4.png)

<br>

따라서, 특정 파일에 대해 `rwx`라 명시된 경우 읽고/쓰고/실행이 모두 가능함을 의미한다. 
하지만, 만약 여기서 읽기 **권한을 뺄 경우에는** `r`을 **`-`로 교체**하여 -wx로 명시한다.
더 나아가, 만약 모든 권한을 뺀 경우에는 `---`라고 명시한다.

<br>

### <span style="color:navy">1-3) 사용자/그룹/그 외 사용자<span>

권한 문자열의 각 단락의 의미를 파악하기 앞서 리눅스의 사용자에 대해서 먼저 짚고 간다.
사용자는 크게 **소유자(혹은 유저)**(`u: user`), **그룹**(`g : group`), **소유자 이외의 다른 사람**(`o, other`), 그리고 **전체**(`a, all`)로 나뉘어진다.

<br>

모든 유저(`u`)들은 최소한 하나의 그룹(`g`)에 기본적으로 속해 있으며, 소유자(`u`)는 다수의 그룹(`g`)에 속해 있을 수 있다.
서버내 유저들이 속한 그룹을 확인하기 위해서는 다음과 같이 `/etc/group`을 통해서도 확인할 수 있으며,

![img_8.png](/assets/img/2022-05-07_linux_permission/figure_5.png)

<br>

`groups` 명령어(=`id -Gn` 명렁어)를 통해서 현재 **로그인된 계정이 속한 모든 그룹들을 확인**할 수 있으며, 
`groups`명령어에 다른 유저 아이디를 추가하여 해당 유저가 어떤 그룹들에 속해있는지 확인할 수 있다.

![img_9.png](/assets/img/2022-05-07_linux_permission/figure_6.png)

<br>

그리고, 위에서 언급했듯이 파일 타입을 제외한 퍼미션 문자열의 각 단락의 순서는 의미를 가지고 있으며,
각 단락의 <u>순서대로</u> 
**소유자(혹은 유저)**(`u: user`)**에 대한 권한**, **그룹**(`g : group`)**에 대한 권한**, **소유자 이외의 다른 사람**(`o, other`)**에 대한 권한**을 의미한다.

![img_11.png](/assets/img/2022-05-07_linux_permission/figure_7.png)

<br>

예를 들면 다음과 같다.
> d`rwxr-xr--`  3  user1  group1  18 Apr  6 17:30 db

[ user1 기준 ]

- 만약 user1이 group1에 속해있지 않을 경우 : 유저는 db디렉토리 내부의 파일에 대해서 읽기(`r`)/쓰기(`w`)/실행(`x`)이 모두 가능하다.
- 만약 user1이 group1에 속해있을 경우 : 유저는 db디렉토리 내부의 파일에 대해서 읽기(`r`)와 실행(`x`)만 가능하다.

[ group1 기준 ]

- group1은 db디렉토리 내부의 파일에 대해서 읽기(`r`)와 실행(`x`)만 가능하다. 

[ other user 기준 ]

- 소유자와 그룹에 속한 유저 이외의 유저들의 경우 db디렉토리 내부의 파일에 대해서 읽기(`r`)만 가능하다. 

<br>
<br>

퍼미션 변경 방법까지 같이 내용을 작성하기에는 포스팅이 너무 길어질 것 같아서, 다음 포스팅에 이어서 작성하고자 한다.
투 비 컨티뉴...!
